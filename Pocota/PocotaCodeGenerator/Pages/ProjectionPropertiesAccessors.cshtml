@using Net.Leksi.Pocota.Common;
@model ClassModel

@Html.Raw("#region Properties Accessors")

    @foreach (PropertyModel pm in Model.Properties)
    {    
        <text>        private static object? @Html.Raw($"Get{pm.Name}Value(object target)")
        {
            @if(!pm.IsList || !pm.IsProjection){
                <text>            return @if (pm.IsProjection) {<text>@Html.Raw($"((IProjection{(pm.IsNullable ? "?" : string.Empty)})")</text>}@Html.Raw($"(({Model.ClassName})target)._projector.{pm.Name}")@if (pm.IsProjection) { <text>)@Html.Raw($"?.As<{pm.Type}>()")</text>}@if (!pm.IsNullable) {<text>!</text> };
</text>
            }
            else {
                string fieldName = $"_{pm.Name.Substring(0, 1).ToLower()}{pm.Name.Substring(1)}";
                <text>            return @Html.Raw($"(({Model.ClassName})target).{fieldName}");
</text>
            }
        }

        @if(!pm.IsList)
        {
            <text>        private static void @Html.Raw($"Set{pm.Name}Value(object target, object? value)")
        {
            @if(!pm.IsList || !pm.IsProjection){
                <text>             @Html.Raw($"(({Model.ClassName})target)._projector.{pm.Name} = ")@if (pm.IsProjection) {<text>@Html.Raw($"((IProjection{(pm.IsNullable ? "?" : string.Empty)})")</text>} else {<text>@Html.Raw($"({(pm.Class is {} ? pm.Class : pm.Type)}{(pm.IsNullable ? "?" : string.Empty)})")</text>}@Html.Raw($"value{(!pm.IsNullable && pm.IsProjection ? "!" : string.Empty)}")@if (pm.IsProjection) { <text>)@Html.Raw($"?.As<{pm.Class}>()")</text>}@if (!pm.IsNullable) {<text>!</text> };
</text>
            }
            else {
                string fieldName = $"_{pm.Name.Substring(0, 1).ToLower()}{pm.Name.Substring(1)}";
                <text>            @Html.Raw($"(({Model.ClassName})target)._projector.{pm.Name} = ")@Html.Raw($"({(pm.Class is {} ? pm.Class : pm.Type)}{(pm.IsNullable ? "?" : string.Empty)})value{(!pm.IsNullable ? "!" : string.Empty)}");
</text>
            }
        }
</text>
        }

</text>
    }

@Html.Raw("#endregion Properties Accessors");

