@page
@using Net.Leksi.Pocota.Common;
@model ClassModel

@Html.Partial("Header", Model)

public class @Model.ClassName : @Html.Raw(string.Join(", ", Model.Interfaces))
{
    public void Configure<TController>(IServiceCollection services) where TController : Controller, IPocotaController
    {
        services.StartAddContract@{}@Html.Raw($"<{@Model.ContractName}>")@{}();
@foreach(var service in Model.Services)
{
    <text>        services.AddTransient@{}@Html.Raw($"<{service.Key}, {service.Value}>")@{}();
</text>
}
        services.Add(new ServiceDescriptor(typeof(@Model.ControllerInterface), typeof(TController), ServiceLifetime.Transient));
    }
}