<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:local="clr-namespace:Net.Leksi.Pocota.Client"
        xmlns:local1="clr-namespace:Net.Leksi.Pocota.Client;assembly=Net.Leksi.Pocota.Client.CSharp"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <x:Array Type="sys:Boolean" x:Key="Booleans">
        <sys:Boolean>True</sys:Boolean>
        <sys:Boolean>False</sys:Boolean>
    </x:Array>
    <Style TargetType="Button" x:Key="ViewButtonStyle" x:Shared="False">
        <Style.Triggers>
            <DataTrigger Value="False">
                <DataTrigger.Binding>
                    <MultiBinding Converter="{local1:ParameterizedResource $converter}" ConverterParameter="$test|12">
                        <Binding Path="."/>
                        <Binding Path="$path"/>
                    </MultiBinding>
                </DataTrigger.Binding>
                <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style TargetType="ComboBox" x:Key="ViewCollectionComboBoxStyle" x:Shared="False">
        <Style.Triggers>
            <DataTrigger Binding="{Binding $path, Converter={local1:ParameterizedResource $converter}, ConverterParameter=IsNull|30}" Value="True">
                <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
        </Style.Triggers>
        <Setter Property="ItemsSource" Value="{Binding $path, Converter={local1:ParameterizedResource $converter}, ConverterParameter=34}"/>
    </Style>
    <Style TargetType="TextBlock" x:Key="ViewTextStyle" x:Shared="False">
        <Style.Triggers>
            <DataTrigger Binding="{Binding $path, Converter={local1:ParameterizedResource $converter}, ConverterParameter=$test|38}" Value="True">
                <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style TargetType="StackPanel" x:Key="PrimaryKeyStyle" x:Shared="False">
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsEntity}" Value="False">
                <Setter Property="Visibility" Value="Collapsed"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <DataTemplate x:Key="ViewCollectionDataTemplate" x:Shared="False">
        <StackPanel>
            <TextBlock Style="{local1:ParameterizedResource ViewTextStyle, Replaces=$test:IsNotNull}">null</TextBlock>
            <ComboBox SelectedIndex="0" 
                      Style="{local1:ParameterizedResource $ViewCollectionComboBoxStyle, 
                            Defaults=$ViewCollectionComboBoxStyle:ViewCollectionComboBoxStyle}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <DockPanel LastChildFill="True">
                            <Button DockPanel.Dock="Right" Style="{local1:ParameterizedResource ViewButtonStyle, Replaces=$path:.|$test:IsPoco}" 
                                    Command="{Binding Value, Source={local1:ParameterizedResource $ViewTracedPocoCommandProxy}}" 
                                    CommandParameter="{Binding}" Margin="10,0,0,0">
                            <Button.Content>👁</Button.Content>
                            </Button>
                            <TextBlock Text="{Binding Converter={local1:ParameterizedResource $converter}, ConverterParameter=65}"/>
                        </DockPanel>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Key="ViewPocoDataTemplate" x:Shared="False">
        <DockPanel LastChildFill="True">
            <Button DockPanel.Dock="Right" Style="{local1:ParameterizedResource ViewButtonStyle, Replaces=$test:IsNotNull}"  Margin="10,0,0,0"
                    Command="{Binding Value, Source={local1:ParameterizedResource $ViewTracedPocoCommandProxy}}" 
                    CommandParameter="{Binding $path}">
            <Button.Content>👁</Button.Content>
            </Button>
            <TextBlock Text="{Binding $path, Converter={local1:ParameterizedResource $converter}, ConverterParameter=75}" />
        </DockPanel>
    </DataTemplate>
    <DataTemplate x:Key="ViewValueDataTemplate" x:Shared="False">
        <TextBlock Text="{Binding $path, Converter={local1:ParameterizedResource $converter}, ConverterParameter=79}" >
        </TextBlock>
    </DataTemplate>
    <local:ViewTracedPocoDataTemplateSelector x:Key="ViewTracedPocoDataTemplateSelector" x:Shared="False" 
            Collection="{local1:ParameterizedResource ViewCollectionDataTemplate}"
            Poco="{local1:ParameterizedResource ViewPocoDataTemplate}"
            Value="{local1:ParameterizedResource ViewValueDataTemplate}"/>
    <local:ViewTracedPocoDataTemplateSelector x:Key="EditTracedPocoDataTemplateSelector" x:Shared="False" 
            Collection="{local1:ParameterizedResource ViewCollectionDataTemplate}">
        <local:ViewTracedPocoDataTemplateSelector.Poco>
            <DataTemplate>
                <DockPanel LastChildFill="True">
                    <Button DockPanel.Dock="Right" Style="{local1:ParameterizedResource ViewButtonStyle, Replaces=$test:IsNotNull}" 
                            Command="{Binding Value, Source={local1:ParameterizedResource $ViewTracedPocoCommandProxy}}" 
                            CommandParameter="{Binding $path}">
                    <Button.Content>👁</Button.Content>
                        <Button.ToolTip>Посмотреть</Button.ToolTip>
                    </Button>
                    <Button DockPanel.Dock="Right" Style="{local1:ParameterizedResource ViewButtonStyle, Replaces=$test:IsNullAndWritable}" 
                            Command="{Binding Value, Source={local1:ParameterizedResource $AddNewPocoPropertyCommandProxy}}" 
                            CommandParameter="{Binding}">
                    <Button.Content>➕</Button.Content>
                        <Button.ToolTip>Присвоить</Button.ToolTip>
                    </Button>
                    <Button DockPanel.Dock="Right" Style="{local1:ParameterizedResource ViewButtonStyle, Replaces=$test:IsNotNullAndWritable}" 
                            Command="{Binding Value, Source={local1:ParameterizedResource $ClearPocoPropertyCommandProxy}}" 
                            CommandParameter="{Binding}"
                            Margin="10,0,0,0">
                    <Button.Content>➖</Button.Content>
                        <Button.ToolTip>Обнулить</Button.ToolTip>
                    </Button>
                    <TextBlock Text="{Binding $path, Converter={local1:ParameterizedResource $converter}, ConverterParameter=109}"/>
                </DockPanel>
            </DataTemplate>
        </local:ViewTracedPocoDataTemplateSelector.Poco>
        <local:ViewTracedPocoDataTemplateSelector.Bool>
            <DataTemplate>
                <ComboBox ItemsSource="{StaticResource Booleans}" SelectedItem="{Binding $path, UpdateSourceTrigger=PropertyChanged}"></ComboBox>
            </DataTemplate>
        </local:ViewTracedPocoDataTemplateSelector.Bool>
        <local:ViewTracedPocoDataTemplateSelector.Enum>
            <DataTemplate>
                <ComboBox ItemsSource="{Binding Converter={local1:ParameterizedResource $converter}, ConverterParameter=Enum|120}" SelectedItem="{Binding $path, UpdateSourceTrigger=PropertyChanged}"></ComboBox>
            </DataTemplate>
        </local:ViewTracedPocoDataTemplateSelector.Enum>
        <local:ViewTracedPocoDataTemplateSelector.Value>
            <DataTemplate>
                <TextBox Text="{Binding $path, Converter={local1:ParameterizedResource $converter}, ConverterParameter=125, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Stretch">
                </TextBox>
            </DataTemplate>
        </local:ViewTracedPocoDataTemplateSelector.Value>
    </local:ViewTracedPocoDataTemplateSelector>

</ResourceDictionary>