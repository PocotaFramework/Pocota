@page
@using Net.Leksi.Pocota.Common;
@using Core = Net.Leksi.Pocota.Server.Core;
@model ClassModel

@Html.Partial("Header", Model)

public class @Model.ClassName : @Html.Raw(string.Join(", ", Model.Interfaces))
{
    public void Configure(@nameof(Core) core)
    {
        core.StartAddContract@{}@Html.Raw($"<{@Model.ContractName}>")@{}();
@foreach(var service in Model.Services)
{
    <text>        core.@nameof(Core.Add)@{}@service.LifeTime@{}@Html.Raw($"<{service.ServiceType}, {service.ImplementationType}>")@{}();
</text>
}
@foreach(var map in Model.PrimaryKeyMapping)
{
    <text>        core.@nameof(Core.MapPrimaryKeyType)@{}(typeof(@map.Key), typeof(@map.Value));
</text>
}
@foreach(var map in Model.AccessManagerMapping)
{
    <text>        core.@nameof(Core.MapAccessManagerType)@{}(typeof(@map.Key), typeof(@map.Value));
</text>
}
    }
}